apiVersion: apps/v1
kind: Deployment
metadata:
name: sf1-scraper-worker
namespace: default
labels:
app: sf1-scraper
spec:
replicas: 2
revisionHistoryLimit: 5
selector:
matchLabels:
app: sf1-scraper
role: worker
template:
metadata:
labels:
app: sf1-scraper
role: worker
spec:
containers:
- name: worker
image: ghcr.io/callie84/sf1-backend:latest
imagePullPolicy: IfNotPresent
command: ["node","dist/scraper/worker.js"]
env:
- name: NODE_ENV
value: production
- name: MONGODB_URI
valueFrom:
secretKeyRef:
name: sf1-mongo
key: uri
- name: MONGODB_DB
valueFrom:
secretKeyRef:
restartPolicy: Always