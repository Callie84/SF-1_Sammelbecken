apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: monitoring
  labels:
    app.kubernetes.io/name: alertmanager

data:
  sf1.tmpl: |
    {{ define "sf1.subject" }}[SF-1] {{ .CommonLabels.alertname }} â€” {{ .Status | toUpper }}{{ end }}

    {{ define "sf1.slack" }}
    *Status:* {{ .Status | toUpper }}
    *Alert:* {{ .CommonLabels.alertname }}
    *Severity:* {{ .CommonLabels.severity }}
    *Starts:* {{ .Alerts | first | .StartsAt }}
    *Summary:* {{ (index .Alerts 0).Annotations.summary }}
    {{ end }}

    {{ define "sf1.html" }}
    <html><body style="font-family:Segoe UI,Roboto,Arial,sans-serif">
      <h2>[SF-1] {{ .CommonLabels.alertname }} â€” {{ .Status | toUpper }}</h2>
      <p><b>Severity:</b> {{ .CommonLabels.severity }}</p>
      <ul>
      {{ range .Alerts }}
        <li>
          <b>{{ .Labels.instance }}</b> â€” {{ .Annotations.summary }}<br/>
          <small>since {{ .StartsAt }}</small>
        </li>
      {{ end }}
      </ul>
    </body></html>
    {{ end }}