name: scraper-ci
on:
push:
paths:
- 'apps/price-service/**'
- '.github/workflows/scraper-ci.yml'
pull_request:
paths:
- 'apps/price-service/**'
schedule:
- cron: '15 * * * *' # Stündlicher Dry‑Run


jobs:
test:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
with: { node-version: 20 }
- run: npm ci --workspace apps/price-service
- run: npm run lint --workspace apps/price-service
- run: npm test --workspace apps/price-service


dry-run:
runs-on: ubuntu-latest
if: github.event_name == 'schedule'
steps:
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
with: { node-version: 20 }
- run: npm ci --workspace apps/price-service
- name: Dry‑Run (Parser gegen Fixtures)
run: npm run test:fixtures --workspace apps/price-service